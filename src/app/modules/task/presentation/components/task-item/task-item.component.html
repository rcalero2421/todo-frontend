<div
  class="p-4 border border-gray-200 rounded shadow-sm bg-gray-50 hover:bg-gray-100 transition relative"
  cdkDrag
  [cdkDragData]="task"
>
  <div class="flex justify-between items-start">
    <div class="flex gap-2">
      <span class="text-gray-400 cursor-move select-none" cdkDragHandle title="Drag task">☰</span>
      <div>
        <div (dblclick)="edit.emit(task)" class="font-semibold text-gray-800 text-base cursor-pointer">
          {{ task.title }}
        </div>
        <div class="text-xs text-gray-500">
          Created: {{ task.createdAt | date: 'short' }}
          <ng-container *ngIf="task.updatedAt">
            &nbsp;|&nbsp; Updated: {{ task.updatedAt | date: 'short' }}
          </ng-container>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-2">
      <button class="text-blue-500" (click)="edit.emit(task)">✏️</button>
      <button class="text-red-500" (click)="delete.emit(task.id)">🗑️</button>
    </div>
  </div>

  <div
    [ngClass]="{
      'bg-gray-400': task.status === 'TODO',
      'bg-blue-400': task.status === 'IN_PROGRESS',
      'bg-green-500': task.status === 'COMPLETED'
    }"
    class="mt-3 h-2 rounded w-20"
  ></div>
</div>
